<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="hu" lang="hu">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/scormelte_alap.css" rel="stylesheet" type="text/css" title="" />
<link href="css/style_spec.css" rel="stylesheet" type="text/css" />
<link href="css/scormelte_nagy.css" rel="alternate stylesheet" type="text/css" title="nagy" />
<link href="css/scormelte_inverz.css" rel="alternate stylesheet" type="text/css" title="inverz" />
<!--[if lte IE 6]>
<link href="css/scormelte_ie6.css" rel="stylesheet" type="text/css" title="" />
<![endif]-->
<!-- syntax highlight -->
<link rel="stylesheet" type="text/css" href="css/shCore.css" />
<link rel="stylesheet" type="text/css" href="css/shThemeDefault.css" />
<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushCpp.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
<script type="text/javascript" src="js/shBrushDelphi.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushCss.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all()
</script>
<title>
Számítógépes alapismeretek II. / 
Folyamatok, folyamatleírók, táblázatok és <span class="fogalom" title="szál">szálak</span> fogalma. A folyamatok és a <span class="fogalom" title="szál">szálak</span> közötti különbségek, a folyamatok <span class="fogalom" title="ütemezés">ütemezése</span>
/Folyamatállapotok</title>
<meta name="description" content="A tananyag  fejlesztése a TÁMOP-4.1.2.A/2-10/1 pályázat keretén belül történt." />
<meta name="keywords" content="Hardver alapismeretek, operációs rendszer, számítógépes alapismeretek, operációs rendszer fogalma, operációs rendszerek története, operációs rendszer feladata, operációs rendszer generációk, operációs rendszer típusok, folyamatok, folyamat táblázat, szál &ndash; folyamatok, rendszerhívások, operációs rendszer struktúrák, kernelmód, kernel, felhasználói mód, B/K művelet, folyamatok modellje, szinkron rendszerhívás, asszinkron rendszerhívás, állapotai, megvalósításuk, folyamatok kommunikációja, IPC (Inter Process Communication), megszakítástábla, IDT, megszakításvezérlő, PIC, megszakítás, interrupt, megszakításkérelem, IRQ, megszakításkezelési folyamat, kivétel, hibakeresés (debuggolás), töréspont, fájlrendszer, MBR, partíciós szektor, Ntldr, klaszter (cluster), szektor, FAT, NTFS, ext, TSS, csapda, ütemezés, szál, szemafor, mutex, monitor, POSIX, szignál, osztott memória, csővezeték, kritikus szakasz, Wybe Dijkstra, CPU, erőforrás, holtpont, kiéheztetés, integrált áramkör, multiprogramozás, beágyazott rendszerek, partíció, MMU, lapcsere, FIFO, socket, lapozás, swap, interaktív rendszer, kötegelt rendszer, kliens, job, jogosultság, metaadat, könyvtár, UNIX, GNU/LINUX, erőforrás-foglalási gráf, fizikai memória, virtuális memória, merevlemez, floppy, fregmentáció, defregmentáló program, MFT, API, i-node, cache memory, SSH, HyperThread, párhuzamosság" />
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="js/kep.js"></script>
<script type="text/javascript" src="js/jquery.media.js"></script>
<script type="text/javascript" src="js/jquery.highlight-3.js"></script>
<script type="text/javascript" src="js/kereses.js"></script>
<script type="text/javascript" src="js/stylesheetToggle.js"></script>
<script type="text/javascript" src="js/cookie.js"></script>
<script type="text/javascript" src="js/stilusvalto.js"></script>
<script type="text/javascript" src="js/fogalmak.js"></script>
<script type="text/javascript" src="js/fogalom.js"></script>
<script type="text/javascript" src="js/jwplayer.js"></script>
<script type="text/javascript">
$(document).ready(function() 
{
$("a.hang").media( {width: 250, height: 50,  autoplay: false} );
});
</script>
<script type="text/javascript" src="js/navigacio.js"></script>
</head>
<body>
<div><a name="teteje"  id="teteje"></a></div>
<div class="jawsfmenu">
  <ul>
    <li><a class="tartalom" href="#tartalom" accesskey="t" tabindex="2">Ugrás a <span class="gyorsb">t</span>artalomra</a></li>
    <li><a class="tartalomj" href="#fejezetek" accesskey="j" tabindex="5">Ugrás a tartalom<span class="gyorsb">j</span>egyzékre</a></li>
    <li><a class="tanutm" href="#tanutm" accesskey="u" tabindex="7">Ugrás a tan<span class="gyorsb">u</span>lási útmutatóra</a></li>
  </ul>
</div>
<div class="ki_kereses"></div>
<div class="oldal">
  <div class="utmutato">
    <div class="utm_hivatkozasok"><span class="elozolap"><img src="navi/ikon_vissza_dis.gif" alt="Vissza az előzőleg látogatott oldalra (nem elérhető funkció)" title="Vissza az előzőleg látogatott oldalra (nem elérhető funkció)" /></span><a class="kezdolap" href="index.html" accesskey="p" tabindex="21"><img src="navi/ikon_kezdolap.gif" alt="Vissza a modul kezdőlapjára" title="Vissza a modul kezdőlapjára" width="36" height="36"/></a><a class="elozotanlap" href="lecke5_lap2.html" accesskey="e" tabindex="22"><img src="navi/ikon_elozolap.gif" alt="Ugrás a tananyag előző oldalára" title="Ugrás a tananyag előző oldalára" width="36" height="36" /></a><a class="kovetktanlap" href="lecke5_lap4.html" accesskey="v" tabindex="23"><img src="navi/ikon_kovetklap.gif" alt="Ugrás a tananyag következő oldalára" title="Ugrás a tananyag következő oldalára" width="36" height="36"/></a><span class="ki_fogalomkapcs"><img src="navi/ikon_fogalmakbe_dis.gif" alt="Fogalom megjelenítés (nem elérhető funckió)" title="Fogalom megjelenítés (nem elérhető funckió)" /></span><span class="ki_fogalomlista"><img src="navi/ikon_fogalmaklista_dis.gif" alt="Fogalmak listája (nem elérhető funkció)" title="Fogalmak listája (nem elérhető funkció)" /></span><span class="ki_nyomtatas"><img src="navi/ikon_nyomtatas_dis.gif" alt="Oldal nyomtatása (nem elérhető funkció)" title="Oldal nyomtatása (nem elérhető funkció)" /></span><a class="oldalterkep" href="oldalterkep.html" accesskey="d" tabindex="31"><img src="navi/ikon_oldalterkep.gif" alt="Oldaltérkép megtekintése" title="Oldaltérkép megtekintése"  width="36" height="36" /></a><a class="sugo" href="sugo.html" accesskey="s" tabindex="33"><img src="navi/ikon_sugo.gif" alt="Súgó megtekintése" title="Súgó megtekintése"  width="36" height="36" /></a></div>
  </div>
  <div class="tartalommenu">
    <div class="tartalommenu_fejlec"><span id="lapteteje"><a  href="#teteje"><span class="gyorsb">F</span>el a lap tetejére</a></span><a name="fejezetek"   id="fejezetek">Tartalomjegyzék</a></div>
    <ul><li><a href="#hiv1">Folyamatok, folyamatleírók, táblázatok és szálak fogalma. A folyamatok és a szálak közötti különbségek, a folyamatok ütemezése</a><ul><li><a href="#hiv2">Programozási környezet</a><ul><li><a href="#hiv3">Folyamatállapotok</a></li><li><a href="#hiv4">Folyamatok leírása és táblázata</a></li></ul></li></ul></li></ul> 
  </div>
  <div class="tartalom"> <a name="tartalom"    id="tartalom"></a> 
    <h1><a name="hiv1" id="hiv1"></a>Folyamatok, folyamatleírók, táblázatok és szálak fogalma. A folyamatok és a szálak közötti különbségek, a folyamatok ütemezése</h1><h2><a name="hiv2" id="hiv2"></a>Programozási környezet</h2><h3><a name="hiv3" id="hiv3"></a>Folyamatállapotok</h3><p>Láttuk, hogy a folyamatok önálló egységek, a memória egy kis szeletében helyezkednek el. Ahhoz, hogy a központi egység ezeket végre tudja hajtani, a folyamatokhoz tartozzon saját utasításszámláló, verem, és legyenek egyéb állapotjelzői. Tudható, hogy a folyamatok közül biztosan egy folyamat fut mindig, és az összes többi arra vár, hogy lehetőséget kapjon a futásra. </p><p>A várakozó folyamatokat több csoportba sorolhatjuk az <span class="fogalom" title="operációs rendszer">operációs rendszerektől</span> függően. Bármilyen csoportosítást is nézünk, jellemzően két lényeges csoport különböztethető meg a várakozó folyamatok között. </p><p>Ebből talán a folyamatok többségét a <strong>futásra készen álló folyamatok</strong> adják, melyeknek nincs semmire szükségük, csak arra, hogy újra &#132;processzorhoz jussanak&#148;! A másik csoportot a <strong>blokkolt folyamatok</strong> alkotják, melyeknek további működéséhez szükségük van egy másik folyamat eredményére vagy valamilyen adatára. Ezek nem tudnak futni még akkor sem, ha processzoridőt kapnának. A csoportok között az alábbi négy átmenetet különböztethetjük meg:</p><ul><li>Futó -&gt; Blokkolt<ul><li>Várni kell még valamire. A futó folyamat nem tudja folytatni a futását, mert valamilyen bemeneti adatra van szüksége. Ez akár egy másik folyamat eredménye is lehet.</li></ul></li><li>Futó -&gt; Futásra kész<ul><li>Ez egy természetes átmenet. Egyszerűen lejárt az aktuális folyamat processzorideje, és az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a folyamatot a futásra kész, várakozó folyamatok csoportjába sorolja.</li></ul></li><li>Futásra kész -&gt; Futó<ul><li>Az előző átmenet fordítottja. Az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> ütemezője a futásra készen várakozó folyamatok csoportjából a soron következő folyamatot futtatja. A sorrendről az ütemező dönt, a folyamatok nem nagyon tudnak róla, hogy melyikük fog következni.</li></ul></li><li>Blokkolt -&gt; Futásra kész<ul><li>A várva várt adat megérkezett, a blokkolt folyamat marad még a várakozó folyamatok csoportjában, de már futásra készen várja, hogy az ütemező döntése esetén újra futhasson.</li></ul></li></ul><p>A folyamatok négy állapotátmenetét és a hozzájuk tartozó három állapotot szemléletesebb formában az <em>5.5. ábra</em> mutatja.</p><!--fej5_kep_5--><div class="kep jobb sz300"><img src="kepek/fej5_kep5_w300.jpg" alt="A képen a három állapot látható: futó, blokkolt és futásra kész" style="width:100%; height:auto;" title="A képen a három állapot látható: futó, blokkolt és futásra kész" /><span class="kepalairas">5.5. ábra: A folyamatok állapotai és állapot átmenetei</span></div><div class="uresmargo"></div><!--ENDfej5_kep_5--><p>A folyamatok halmaza sokféle folyamatot tartalmazhat. Ez a modell nem osztályozza őket rendszer- vagy felhasználói, netán eszközkezelő (megszakításkezelő) folyamat szerint, hanem egységesen tekint a folyamatokra, amelyeknek az állapotátmeneteit az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> ütemezője vezérli. Az ütemezőt az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> <span class="fogalom" title="kernel">kernelje</span> tartalmazza. (Ennek tárgyalása egy későbbi fejezetben részletesen sorra kerül.)</p><p>Említettük korábban, hogy a bemutatott alapvető modell helyett sok esetben részletesebb, több állapotot tartalmazó leírással találkozhatunk. A <span class="fogalom" title="UNIX">UNIX</span> és a <span class="fogalom" title="UNIX">UNIX</span> -szerű <span class="fogalom" title="operációs rendszer">operációs rendszerekben</span>, mint amilyen például a <span class="fogalom" title="GNU/LINUX">GNU/LINUX</span> <span class="fogalom" title="operációs rendszer">operációs rendszer</span> is, külön jelölik azokat a folyamatokat, melyek a futó állapotból (máshonnan amúgy nem is tudna), befejezik a futásukat, mert elvégezték a kijelölt feladatokat. Ekkor a folyamat a befejezés (más néven kilépés &ndash; exit) utasítást hajtja végre, ami felszabadítja a lefoglalt <span class="fogalom" title="erőforrás">erőforrásokat</span>, így már nem vesz részt az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> &#132;életében&#148;, és gyakorlatilag arra vár, hogy az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> véglegesen kitegye a folyamatok közül. (Ami pontosabban fogalmazva azt jelenti, hogy a folyamathoz tartozó minden egyes bejegyzés tűnjön el a /proc/pid <span class="fogalom" title="könyvtár">könyvtárból</span>, illetve maga a <span class="fogalom" title="könyvtár">könyvtár</span> is.) Ezt az állapotot találóan <strong>zombi</strong> (élőhalott &ndash; zombie) <strong>állapotnak</strong> nevezik. </p><p>Meg kell jegyezni, hogy sok esetben olyan &#132;zombi&#148; folyamatokról is beszélhetünk, amikor a folyamat valamilyen hiba okán nem tud részt venni az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> életében, és nem válaszol semmilyen üzenetre sem, így egyetlen lehetőség marad, hogy erőnek erejével tegyük ki a folyamatok közül (pl. a &#132;kill -9 PID&#148; parancs alkalmazásával, ahol a PID az adott folyamat folyamatazonosítóját jelöli). Ki ne találkozott volna olyan ablakkal, aminek a fejlécében a &#132;Program nem válaszol&#148; üzenet olvasható?! </p><p>Ez a folyamatbefejezési finomítás érdemben nem befolyásolja az egyszerűbb és a valós modellt, így részletesebben nem is tárgyaljuk.</p><p class="vissza"><a href="#fejezetek">Vissza a tartalom<span class="gyorsb">j</span>egyzékhez</a></p><h3><a name="hiv4" id="hiv4"></a>Folyamatok leírása és táblázata</h3><p>Ahhoz, hogy a folyamatokat &ndash; a részletes vagy kevésbé részletes folyamatok modelljétől eltekintve &ndash; megfelelően tudja ütemezni az <span class="fogalom" title="operációs rendszer">operációs rendszer</span>, nyilván kell tartani minden olyan információt, ami a folyamat újraütemezéséhez szükséges. A nyilvántartáshoz az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> egy táblázatot használ, amit <strong>folyamattáblázatnak</strong> neveznek. Más irodalmakban a folyamattáblázat gyakori elnevezése a <strong>folyamatvezérlő blokk</strong> (Process Control Block &ndash; PCB). </p><p>Ebben a táblázatban minden olyan információ tárolva legyen, ami ahhoz kell, hogy a folyamatot a futó állapotából a futásra kész állapotba hozzuk át, majd ha újra futó állapotba kerül, akkor úgy folytathassa a futását, mintha semmi sem történt volna. </p><p>A teljesség igénye nélkül egy folyamathoz tartozó ilyen adatok: </p><ul><li>a folyamat utasításszámlálója, </li><li>a folyamat veremmutatója, </li><li>a processzor regisztereinek adatai, </li><li>a nyitott fájlok állapotinformációja, illetve nem utolsósorban </li><li>a memória (kapcsolódó) adatai.</li></ul><p>Ha meggondoljuk azt, hogy ezen adatmennyiség nem is olyan kevés, nagyon fontos a mentési és a visszaolvasási hatékonyság. Ha sok időt igényel, akkor az azzal jár, hogy az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> ütemezője leköti a rendszererőforrások nagy részét. Bár ezen segít a processzorok egyre nagyobb teljesítménye, de nem lenne elég, ha nem társulna hozzá processzortámogatás. Az x486 processzorcsalád megjelenése óta a folyamatállapot szegmens (Task State Segment &ndash; <span class="fogalom" title="TSS">TSS</span>, minden folyamatnak van ilyen) segítségével gyorsítja a váltást, illetve a folyamatregiszter (Task Register &ndash; TR) tartalmazza az aktív folyamat <span class="fogalom" title="TSS">TSS</span> leíróját. Ennek a cseréje gyors (általában egy-két gépi óraciklus), így ezek révén a folyamatok váltása nagyon hatékony.</p><p>A teljesség igénye nélkül a folyamattábla legfontosabb mezőit felsoroljuk:</p><ul><li><span class="fogalom" title="kernel">kernel</span>információk: <ul><li>a regiszterek, az utasításszámláló, a programállapot-szó, a folyamatállapot, a veremmutató, az aktuális <span class="fogalom" title="ütemezés">ütemezési</span> prioritás, a maximális <span class="fogalom" title="ütemezés">ütemezési</span> prioritás, az időzítési egység mérete, a felhasznált processzoridő (<span class="fogalom" title="CPU">CPU</span> idő) stb.</li></ul></li><li>Folyamatkezelő információk: <ul><li>a kódszegmens-mutató, az adatszegmens-mutató, a szignálállapot, a kilépési állapot, a folyamat azonosítója (PID), a szülőfolyamat azonosítója (PPID), a gyermekfolyamatok processzorideje, a valódi felhasználói azonosító (UID), a valódi csoportazonosító (GID), a folyamat neve stb.</li></ul></li><li>Fájlkezelő információk: <ul><li>az umask-érték (user mask), a gyökérkönyvtár, a munkakönyvtár, a fájlleírók, a valós felhasználói azonosító (UID), a valós csoportazonosító (GID), a TTY vezérlő stb.</li></ul></li></ul><p>Zárásképpen meg kell jegyezni, hogy a hardvereszközök kezelésének alapja minden mai <span class="fogalom" title="operációs rendszer">operációs rendszerben</span> a megszakításelven működik. Adott egy táblázat, aminek sorszáma a <span class="fogalom" title="megszakítás">megszakítás</span> számát jelenti, míg a táblázat eleme megadja a kiszolgálórutin címét. Ezt a táblát megszakításvektornak nevezzük. Ilyen kiszolgálási elvre épül az ütemező időzítője is. Ekkor az ütemező, az időzítő kiszolgálórutinja az aktuális folyamatot lecseréli a következőre. </p><p>Tegyük fel, hogy egy folyamat adatot vár egy lemezegységtől. Az adat hozzáférhetőségét a lemezegység egy megszakításkéréssel jelzi. Ennek kiszolgálása során a kért adatokat a folyamat rendelkezésére bocsátja (a fájlleírók területére másolja), majd a folyamatot blokkolt állapotból futásra készbe állítja, így egy következő <span class="fogalom" title="ütemezés">ütemezés</span> során a folyamat végrehajtása tovább folytatódik.</p><p class="vissza"><a href="#fejezetek">Vissza a tartalom<span class="gyorsb">j</span>egyzékhez</a></p> 
  </div>
</div>
<div class="utmutato_also">
  <div class="utm_hivatkozasok_also"><a class="oldalteteje" accesskey="f" href="#teteje"><span class="gyorsb">F</span>el a lap tetejére</a>
  <a class="elozotanlap" id="navialsoelozo" href="lecke5_lap2.html"><img src="navi/ikon_elozolap.gif" alt="Ugrás a tananyag előző oldalára" title="Ugrás a tananyag előző oldalára" width="36" height="36" /></a>
  <a id='navialsokov' class="kovetktanlap" href="lecke5_lap4.html" ><img src="navi/ikon_kovetklap.gif" alt="Ugrás a tananyag következő oldalára" title="Ugrás a tananyag következő oldalára" width="36" height="36"/></a>
  </div>
</div>
<div class="ki_stilus"></div>
<div class="impresszum">
  <table class="uszt">
    <tr>
      <td><div class="imp_eltetatklogo"><img alt="ELTE és ELTE TáTK logó" src="css/arculat/elte_plus_tatk.png" style="width:100%;height:auto;" /></div>
        <div class="imp_elteiklogo"><img alt="ELTE és ELTE IK logó" src="css/arculat/elte_plus_ik.png" style="width:100%;height:auto;" /></div></td>
      <td><div class="imp_uszt"><img alt="Új Széchenyi terv" src="css/arculat/USZT_logo_cmyk.jpg" style="width:100%;height:auto;" /></div></td>
      <td><div class="imp_eu"><img alt="A projekt az Európai Unió támogatásával, az Európai Szociális Alap társfinanszirozásával valósul meg." title="A projekt az Európai Unió támogatásával, az Európai Szociális Alap társfinanszirozásával valósul meg." src="css/arculat/ESZA.png" style="width:100%;height:auto;"/></div></td>
    </tr>
  </table>
</div>
</body>
</html>