<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="hu" lang="hu">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/scormelte_alap.css" rel="stylesheet" type="text/css" title="" />
<link href="css/style_spec.css" rel="stylesheet" type="text/css" />
<link href="css/scormelte_nagy.css" rel="alternate stylesheet" type="text/css" title="nagy" />
<link href="css/scormelte_inverz.css" rel="alternate stylesheet" type="text/css" title="inverz" />
<!--[if lte IE 6]>
<link href="css/scormelte_ie6.css" rel="stylesheet" type="text/css" title="" />
<![endif]-->
<!-- syntax highlight -->
<link rel="stylesheet" type="text/css" href="css/shCore.css" />
<link rel="stylesheet" type="text/css" href="css/shThemeDefault.css" />
<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushCpp.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
<script type="text/javascript" src="js/shBrushDelphi.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushCss.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all()
</script>
<title>
Számítógépes alapismeretek II.</title>
<meta name="description" content="A tananyag  fejlesztése a TÁMOP-4.1.2.A/2-10/1 pályázat keretén belül történt." />
<meta name="keywords" content="Hardver alapismeretek, operációs rendszer, számítógépes alapismeretek, operációs rendszer fogalma, operációs rendszerek története, operációs rendszer feladata, operációs rendszer generációk, operációs rendszer típusok, folyamatok, folyamat táblázat, szál &ndash; folyamatok, rendszerhívások, operációs rendszer struktúrák, kernelmód, kernel, felhasználói mód, B/K művelet, folyamatok modellje, szinkron rendszerhívás, asszinkron rendszerhívás, állapotai, megvalósításuk, folyamatok kommunikációja, IPC (Inter Process Communication), megszakítástábla, IDT, megszakításvezérlő, PIC, megszakítás, interrupt, megszakításkérelem, IRQ, megszakításkezelési folyamat, kivétel, hibakeresés (debuggolás), töréspont, fájlrendszer, MBR, partíciós szektor, Ntldr, klaszter (cluster), szektor, FAT, NTFS, ext, TSS, csapda, ütemezés, szál, szemafor, mutex, monitor, POSIX, szignál, osztott memória, csővezeték, kritikus szakasz, Wybe Dijkstra, CPU, erőforrás, holtpont, kiéheztetés, integrált áramkör, multiprogramozás, beágyazott rendszerek, partíció, MMU, lapcsere, FIFO, socket, lapozás, swap, interaktív rendszer, kötegelt rendszer, kliens, job, jogosultság, metaadat, könyvtár, UNIX, GNU/LINUX, erőforrás-foglalási gráf, fizikai memória, virtuális memória, merevlemez, floppy, fregmentáció, defregmentáló program, MFT, API, i-node, cache memory, SSH, HyperThread, párhuzamosság" />
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="js/kep.js"></script>
<script type="text/javascript" src="js/jquery.media.js"></script>
<script type="text/javascript" src="js/jquery.highlight-3.js"></script>
<script type="text/javascript" src="js/kereses.js"></script>
<script type="text/javascript" src="js/stylesheetToggle.js"></script>
<script type="text/javascript" src="js/cookie.js"></script>
<script type="text/javascript" src="js/stilusvalto.js"></script>
<script type="text/javascript" src="js/fogalmak.js"></script>
<script type="text/javascript" src="js/fogalom.js"></script>
<script type="text/javascript" src="js/jwplayer.js"></script>
<script type="text/javascript">
$(document).ready(function() 
{
$("a.hang").media( {width: 250, height: 50,  autoplay: false} );
});
</script>
<script type="text/javascript" src="js/navigacio.js"></script>
</head>
<body>
<div><a name="teteje"  id="teteje"></a></div>
<div class="jawsfmenu">
  <ul>
    <li><a class="tartalom" href="#tartalom" accesskey="t" tabindex="2">Ugrás a <span class="gyorsb">t</span>artalomra</a></li>
    <li><a class="tartalomj" href="#fejezetek" accesskey="j" tabindex="5">Ugrás a tartalom<span class="gyorsb">j</span>egyzékre</a></li>
    <li><a class="tanutm" href="#tanutm" accesskey="u" tabindex="7">Ugrás a tan<span class="gyorsb">u</span>lási útmutatóra</a></li>
  </ul>
</div>
<div class="ki_kereses"></div>
<div class="oldal">
  <div class="utmutato">
    <div class="utm_hivatkozasok"><span class="elozolap"><img src="navi/ikon_vissza_dis.gif" alt="Vissza az előzőleg látogatott oldalra (nem elérhető funkció)" title="Vissza az előzőleg látogatott oldalra (nem elérhető funkció)" /></span><a class="kezdolap" href="index.html" accesskey="p" tabindex="21"><img src="navi/ikon_kezdolap.gif" alt="Vissza a modul kezdőlapjára" title="Vissza a modul kezdőlapjára" width="36" height="36"/></a><a class="elozotanlap" href="teszt/lecke1/teszt.html" accesskey="e" tabindex="22"><img src="navi/ikon_elozolap.gif" alt="Ugrás a tananyag előző oldalára" title="Ugrás a tananyag előző oldalára" width="36" height="36" /></a><a class="kovetktanlap" href="lecke2_lap2.html" accesskey="v" tabindex="23"><img src="navi/ikon_kovetklap.gif" alt="Ugrás a tananyag következő oldalára" title="Ugrás a tananyag következő oldalára" width="36" height="36"/></a><span class="ki_fogalomkapcs"><img src="navi/ikon_fogalmakbe_dis.gif" alt="Fogalom megjelenítés (nem elérhető funckió)" title="Fogalom megjelenítés (nem elérhető funckió)" /></span><span class="ki_fogalomlista"><img src="navi/ikon_fogalmaklista_dis.gif" alt="Fogalmak listája (nem elérhető funkció)" title="Fogalmak listája (nem elérhető funkció)" /></span><span class="ki_nyomtatas"><img src="navi/ikon_nyomtatas_dis.gif" alt="Oldal nyomtatása (nem elérhető funkció)" title="Oldal nyomtatása (nem elérhető funkció)" /></span><a class="oldalterkep" href="oldalterkep.html" accesskey="d" tabindex="31"><img src="navi/ikon_oldalterkep.gif" alt="Oldaltérkép megtekintése" title="Oldaltérkép megtekintése"  width="36" height="36" /></a><a class="sugo" href="sugo.html" accesskey="s" tabindex="33"><img src="navi/ikon_sugo.gif" alt="Súgó megtekintése" title="Súgó megtekintése"  width="36" height="36" /></a></div>
    <h1 class="utmutato"><a name="tanutm"  id="tanutm"></a>Tanulási útmutató</h1>
    <div class="osszefoglalas">
      <h2>Összefoglalás </h2>
      <!--{fej2_video_1}--><div class="video"> <div class="felirat">Összefoglaló (2.fejezet) című videó megtekintése,letöltése</div><div class="jaws"><ul><li><a href="#tartalmi_1"> Ugrás a videó tartalmi összefoglalójára. A videó címe: Összefoglaló (2.fejezet).</a></li><li><a href="#teljesszov_1">Ugrás a videó teljes szövegű leírására. A videó címe: Összefoglaló (2.fejezet).</a></li><li><a href="#video_1">Ugrás a videó kisebb felbontású változatának letöltéséhez. A videó címe: Összefoglaló (2.fejezet).</a></li><li><a href="#video_2">Ugrás a videó nagy felbontású változatának letöltéséhez. A videó címe: Összefoglaló (2.fejezet).</a></li></ul></div><div class="kepkockak"><span>A film néhány jellemző képkockája: </span><div class="kep kozep sz550"> <img src="videok/film_video.jpg" alt="Néhány képkocka a filmből." style="width:100%; height:auto;" title="Néhány képkocka a filmből." /> </div></div><div class="filmtartalom"><p><span class="filmtartalom"><a name="tartalmi_1"  id="tartalmi_1">Tartalom:</a></span>A videón az összefoglaló hallgatható meg.</p><p class="videohtml"><a href="videok/osszefoglalo.html" name="teljesszov_1"  id="teljesszov_1"><span class="jaws">Összefoglaló (2.fejezet) című </span> Videó szöveges leírásának megtekintése HTML formátumban.</a> </p></div><div class="letoltes_doboz"><div id="player1"><p class="vid_flv"><a title="" href="videok/2_agk.flv"><span class="jaws">Összefoglaló (2.fejezet) című  </span>Videó letöltése Flash videó formátumban. <span class="filemeret"><span class="filemeret_cimke">A fájl mérete:</span>1.58<abbr title="megabájt">MB</abbr></span></a></p></div><script type="text/javascript">jwplayer("player1").setup({flashplayer: "player.swf",file:"videok/2_agk.flv",wmode: "opaque",width: "100%",skin: "css/skins/darkrv5.zip",controlbar: "over"});</script></div><div class="ido">A videó hossza: 0000 perc 18 másodperc.</div><div class="letoltes"><div class="letoltes_felirat"><span class="jaws">Összefoglaló (2.fejezet) című </span>Videó kisebb és nagyobb felbontású változatainak letöltése különböző formátumokban</div><a name="video_1"  id="video_1"></a><ul><li><a title="Összefoglaló (2.fejezet) című videó letöltése 3GP formátumban (kis változat)" href="videok/2_agk_kismeret.3gp"><span class="jaws">Összefoglaló (2.fejezet) című  videó kis felbontású változatának letöltése <span class="formatum">3GP</span> formátumban. </span><span class="meret_3gp_kis"><img src="css/3gp_kis.gif"  alt="Kis felbontású, 3GP változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">0.26</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li><li><a title="Összefoglaló (2.fejezet) című videó letöltése AVI (DivX) formátumban (kis változat)" href="videok/2_agk_kismeret.avi"><span class="jaws">Összefoglaló (2.fejezet) című videó kis felbontású változatának letöltése <span class="formatum">AVI (DivX)</span> formátumban.</span><span class="meret_avi_kis"><img src="css/avi_kis.gif"  alt="Kis felbontású, AVI változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">1.24</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li><li><a title="Összefoglaló (2.fejezet) című videó letöltése MP4 formátumban (kis változat)" href="videok/2_agk_kismeret.mp4"><span class="jaws">Összefoglaló (2.fejezet) című  videó kis felbontású változatának letöltése <span class="formatum">MP4</span> formátumban. </span><span class="meret_mp4_kis"><img src="css/mp4_kis.gif"  alt="Kis felbontású, MP4 változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">1.25</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li><li><a title="Összefoglaló (2.fejezet) című videó letöltése WMV formátumban (kis változat)" href="videok/2_agk_kismeret.wmv"><span class="jaws">Összefoglaló (2.fejezet) című videó kis felbontású változatának letöltése <span class="formatum">WMV</span> formátumban.</span><span class="meret_wmv_kis"><img src="css/wmv_kis.gif"  alt="Kis felbontású, WMV változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">1.22</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li></ul><a name="video_2"  id="video_2"></a><ul><li><a title="Összefoglaló (2.fejezet) című videó letöltése 3GP formátumban (nagy változat)" href="videok/2_agk.3gp"><span class="jaws">Összefoglaló (2.fejezet) című  videó nagy felbontású változatának letöltése <span class="formatum">3GP</span> formátumban. </span><span class="meret_3gp_nagy"><img src="css/3gp_nagy.gif"  alt="Nagyobb felbontású, 3GP változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">0.88</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li><li><a title="Összefoglaló (2.fejezet) című videó letöltése AVI (DivX) formátumban (nagy változat)" href="videok/2_agk.avi"><span class="jaws">Összefoglaló (2.fejezet) című videó nagy felbontású változatának letöltése <span class="formatum">AVI (DivX)</span> formátumban.</span><span class="meret_avi_nagy"><img src="css/avi_nagy.gif"  alt="Nagyobb felbontású, AVI változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">3.06</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li><li><a title="Összefoglaló (2.fejezet) című videó letöltése MP4 formátumban (nagy változat)" href="videok/2_agk.mp4"><span class="jaws">Összefoglaló (2.fejezet) című  videó nagy felbontású változatának letöltése <span class="formatum">MP4</span> formátumban. </span><span class="meret_mp4_nagy"><img src="css/mp4_nagy.gif"  alt="Nagyobb felbontású, MP4 változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">3.17</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li><li><a title="Összefoglaló (2.fejezet) című videó letöltése WMV formátumban (nagy változat)" href="videok/2_agk.wmv"><span class="jaws">Összefoglaló (2.fejezet) című videó nagy felbontású változatának letöltése <span class="formatum">WMV</span> formátumban.</span><span class="meret_wmv_nagy"><img src="css/wmv_nagy.gif"  alt="Nagyobb felbontású, WMV változat letöltése" /><span class="jaws">Fájlméret:</span><span class="videomeret"><span class="meret_megabajt">3.09</span><span class="megabajt"><abbr title="megabájt">MB</abbr></span></span></span></a></li></ul><div class="nemlebeg"></div></div><div class="nemlebeg"></div></div><!--END{fej2_video_1}--><p>A leckében bemutatjuk a <span class="fogalom" title="rendszerhívás">rendszerhívások</span> és fájlrendszerek fogalmát, ezek szerepét, jellemzőit és a fájlrendszerek leggyakrabban használt típusait (<span class="fogalom" title="FAT">FAT</span>, FAT32, <span class="fogalom" title="NTFS">NTFS</span>, Ext2, ReiserFS).</p> 
    </div>
    <div class="kovetelmeny">
      <h2>Követelmény </h2>
      <p>A tanuló ismerje az alapvető <span class="fogalom" title="rendszerhívás">rendszerhívásokat</span>, fájlrendszereket.</p> 
    </div>
    <div class="feladatok">
      <h2>Önállóan megoldható feladatok</h2>
      <ul><li>Mi a különbség szinkron, illetve aszinkron működés között?</li><li>Miben tér el a rendszerhívás a közönséges szubrutintól?</li><li>Milyen előnnyel jár a rendszerhívások valamilyen magas szintű programnyelvvel történő megadása?</li><li>Milyen esetekben nem folytatódik az aktuális folyamat végrehajtása egy rendszerhívás végrehajtása után?</li><li>Mi az alapvető különbség a megszakítás, interrupt, illetve a hibakezelés között?</li><li>Hasonlítsa össze a FAT és az NTFS (avagy a &#132;windowsos&#148;) fájlrendszereket az ext2, az ext3 és a ReiserFS (avagy a &#132;linuxos&#148;) fájlrendszerekkel!</li><li>A folyamatok modelljének megvalósításához az operációs rendszerek tervezői, írói processzorszintű támogatást kapnak. Nézzen utána egy processzor dokumentációjában (pl. az interneten rákeresve), hogy a Task State Segment (TSS) segítségével hogyan támogatja a processzor a folyamatok közti váltást? Milyen jellemzőket tárol a TSS -ben?</li><li>Nézzen utána, hogy mit jelent a Hyper-V támogatás egy processzorarchitektúrán belül?</li></ul> 
    </div>
  </div>
  <div class="tartalommenu">
    <div class="tartalommenu_fejlec"><span id="lapteteje"><a  href="#teteje"><span class="gyorsb">F</span>el a lap tetejére</a></span><a name="fejezetek"   id="fejezetek">Tartalomjegyzék</a></div>
    <ul><li><a href="#hiv1">A rendszerhívások és a fájlrendszerek fogalma, szerepe, ezek jellemzői </a><ul><li><a href="#hiv2">A rendszerhívások fogalma</a><ul><li><a href="#hiv3">Szolgáltatáshívások és megszakítások</a></li><li><a href="#hiv4">Az operációs rendszerek rendszerhívásainak kezelése</a></li></ul></li></ul></li></ul> 
  </div>
  <div class="tartalom"> <a name="tartalom" id="tartalom"></a> 
    <h1><a name="hiv1" id="hiv1" ></a>A rendszerhívások és a fájlrendszerek fogalma, szerepe, ezek jellemzői </h1><h2><a name="hiv2" id="hiv2" ></a>A rendszerhívások fogalma</h2><p>A legtöbb operációs rendszer a számítógéphez tartozó és ehhez hozzákapcsolt hardverrészleteket eltakarja a felhasználói programok elől úgy, hogy a közvetlen hozzáférés helyett inkább egy, a programozók számára kényelmes programfejlesztési környezetet biztosítanak. Így az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> egyáltalán nem is engedi meg, hogy egy átlagfelhasználó hozzá tudjon férni, és így bele tudjon nyúlni az <span class="fogalom" title="operációs rendszer">operációs rendszert</span> üzemeltető mechanizmusokba és nélkülözhetetlen konfigurációs fájljaiba. Például a <span class="fogalom" title="UNIX">UNIX</span> <span class="fogalom" title="operációs rendszer">operációs rendszerben</span> nincs megengedve mindenkinek, hogy a hajlékony mágneslemezekhez (<span class="fogalom" title="floppy">floppy</span> disk) tartozó speciális fájlt megnyissa. </p><p>Tehát a hardverrészletekhez való közvetlen hozzáférés helyett az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> úgynevezett szolgáltatásokat nyújt a felhasználói programoknak. Ilyen szolgáltatások például egy megadott fájl megnyitása, egy megadott fájlból való karakterek kiolvasása és egy megadott fájlba történő karakterek írása.</p><p>A számítógépes programok írása során az egyik legjellegzetesebb programkészítési &#132;technikája&#148; a programozóknak az, amikor a gyakran ismétlődő tevékenységeket valamilyen összefoglaló szolgáltatás formájában valósítják meg. Ez a megvalósítás sok tényezőtől függ, ilyenek például: a megoldandó feladat jellege, a programfejlesztési környezet, az adott programozási nyelv sajátosságai és nem utolsósorban az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> szolgáltatásai. </p><p>Ez utóbbi fontosságára leginkább talán az mutat rá, hogy sok fejlesztési környezetben a beviteli és a kiviteli utasítások is <span class="fogalom" title="könyvtár">könyvtári</span> szolgáltatásként, pontosabban <span class="fogalom" title="operációs rendszer">operációs rendszerbeli</span> <span class="fogalom" title="könyvtár">könyvtári</span> szolgáltatásként jelennek meg. Ilyen környezet, nyelv például a C, C++ programozási nyelv is. (A C programozási nyelv esetén a kiviteli és a beviteli utasításaink rendre a &#132;printf&#148; és a &#132;scanf&#148; utasítások, a C++ programozási nyelv esetén a &#132;cout&#148; és a &#132;cin&#148; utasítások.)</p><p>Az <span class="fogalom" title="operációs rendszer">operációs rendszerbeli</span> <span class="fogalom" title="könyvtár">könyvtári</span> szolgáltatások tekintetében gyakran azzal a megfogalmazással találkozhatunk, hogy minden <span class="fogalom" title="operációs rendszer">operációs rendszerbeli</span> <span class="fogalom" title="könyvtár">könyvtári</span> támogatást, annak igénybevételét, programhívását <span class="fogalom" title="rendszerhívás">rendszerhívásnak</span> neveznek. </p><p>Ezen az értelmezésen kicsit módosít a mai <span class="fogalom" title="operációs rendszer">operációs rendszerek</span> jellemző kétféle kódvégrehajtási módja. Ez a felhasználói program mód, illetve a <span class="fogalom" title="kernel">kernel</span> (felügyelt) program mód. A kernelmódban az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> azon része fut, amelyek az egész számítógép működése, stabilitása szempontjából a legkritikusabb feladatokat végzik. Ilyenek például a beolvasó és kiíró utasítások és a hardverelemekkel kommunikáló programrészek. Ily módon azt mondhatjuk, hogy a <span class="fogalom" title="rendszerhívás"><strong>rendszerhívás</strong></span> olyan speciális eljáráshívás, mikor ezek a hívások kritikus feladat végrehajtására a <span class="fogalom" title="kernel">kernelbe</span> vagy más privilegizált <span class="fogalom" title="operációs rendszer">operációs rendszerbeli</span> komponensbe irányulnak. Ilyen <span class="fogalom" title="rendszerhívás">rendszerhívások</span> például egy állomány írására, olvasására, átnevezésére irányuló programhívásoké.</p><p>Például a karakterlánc-összehasonlító szolgáltatás (a C programozási nyelvben ez a &#132;strcmp&#148; utasítás) minden kétséget kizáróan <span class="fogalom" title="operációs rendszer">operációs rendszerbeli</span> <span class="fogalom" title="könyvtár">könyvtári</span> szolgáltatás, mivel nem irányul &#132;érzékeny&#148; területre, így nem is tekintjük <span class="fogalom" title="rendszerhívás">rendszerhívásnak</span>. </p><p>Ellenben ha a felhasználó olyan műveletet akar végrehajtani, amely más futó programokat megzavarhatna a működésükben, tehát &#132;érzékeny&#148; területre irányul (pl. a C programozási nyelvben a fájlkezelő utasítások), akkor ezen művelet végrehajtása miatt az <span class="fogalom" title="operációs rendszer">operációs rendszerhez</span> kell először fordulnia, hogy az végrehajtsa a kért műveletet. Az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a kérést követően ellenőrizheti, hogy a felhasználónak megvan-e <span class="fogalom" title="jogosultság">jogosultsága</span> (jogosítványa) azon művelet végrehajtatására, amit kért, és ha nincs rá a megfelelő <span class="fogalom" title="jogosultság">jogosultsága</span>, akkor az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a szolgáltatás végrehajtását, azaz a <span class="fogalom" title="rendszerhívás">rendszerhívást</span> visszautasíthatja. Ha pedig a felhasználónak megvan a <span class="fogalom" title="jogosultság">jogosultsága</span> az adott művelet elvégzésére, akkor az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a felhasználó által kért szolgáltatás végrehajtását, azaz a <span class="fogalom" title="rendszerhívás">rendszerhívást</span> elvégzi.</p><h3><a name="hiv3" id="hiv3" ></a>Szolgáltatáshívások és megszakítások</h3><p>A gyakorlati megvalósítás szempontjából a <span class="fogalom" title="rendszerhívás">rendszerhívások</span> tipikusan kétféle utasításhoz kötődnek, amelyeket természetesen nem tudjuk a központi egység utasításaitól elválasztani, hiszen ezek biztosítják az adott felépítést.</p><p>Az x86-os architektúrák esetén (az Intel és az AMD processzorok) ezek a <strong>call</strong>, illetve az <strong>int</strong> <span class="fogalom" title="rendszerhívás"><strong>rendszerhívások</strong></span>. A <strong>call</strong> <span class="fogalom" title="rendszerhívás"><strong>rendszerhívás</strong></span> egy címet vár paraméterül, és az adott címen található szolgáltatást hívja meg. Az <strong>int</strong> <span class="fogalom" title="rendszerhívás"><strong>rendszerhívás</strong></span> a szoftveres megszakítás utasítása. A hardveres és szoftveres megszakítások kezelése azonos elven alapulnak. </p><p><strong><span class="fogalom" title="megszakítás">Megszakításnak</span></strong> nevezünk egy olyan eseményt (ezek általában külső eseményt takarnak), amelynek hatására a program futása félbemarad, tehát nem fejeződik be. A megszakításokat egy szám azonosítja (ez általában egy 1 bájt méretű szám), és az int utasításnak is ez lesz a paramétere. A megszakítás azonosító száma alapján tudja a processzor azonosítani, hogy milyen esemény történt.</p><p>Gyakori eset, hogy a megszakításokhoz különböző prioritások is tartoznak. A prioritások bevezetését az indokolja a leginkább, hogy a megszakítás kezelése közben is felléphet egy másik megszakítás. Így a prioritások bevezetésével meghatározhatjuk azt is, hogy mi történik egy olyan esetben, amikor a megszakítás kezelésekor egy másik megszakítási esemény történik. Mindezt úgy, hogy feltesszük azt, hogy egy megszakításkezelő futását csak nála magasabb prioritású megszakítás tudja félbeszakítani. A prioritások alkalmazásával tehát a megszakítások közt egy sorrendiséget tudunk meghatározni. </p><p>A megszakítások általában külön engedélyezhetők, vagy tilthatók, kivéve ez alól a <strong>nem maszkolható megszakítást</strong> (NMI &ndash; Non-maskable <span class="fogalom" title="megszakítás">interrupt</span>). A nem maszkolható megszakítás súlyos hardverhiba esetén állhat elő. A nem maszkolható utasítással azonnal foglalkozni kell, minden más másodlagos a felbukkanása esetén.</p><p>Egy táblázatban, az úgynevezett <strong>megszakítástáblában</strong> (<span class="fogalom" title="Megszakítástábla">IDT</span> &ndash; <span class="fogalom" title="megszakítás">interrupt</span> Description Table) találhatók a kiszolgáló szolgáltatások címei. A megszakításkezelő eljárást ebből a táblázatból tudja kiválasztani a processzor (<span class="fogalom" title="CPU">CPU</span>) a megszakításazonosító száma alapján.  </p><p>A beviteli/kiviteli eszközök (input/output eszközök, röviden B/K vagy I/O eszközök) által kiváltott megszakításokat már hardverszinten megvalósítják, mindezt olyan módon alkották meg, hogy létrehoztak egy <span class="fogalom" title="Megszakításvezérlő, PIC"><strong>Megszakításvezérlő</strong></span> hardveregységet (PIC &ndash; Programmable <span class="fogalom" title="megszakítás">interrupt</span> Controller), amelyik hozzá van kötve a processzor (<span class="fogalom" title="CPU">CPU</span>) megszakításkérelmi lábaihoz. A beviteli/kiviteli eszközök a <span class="fogalom" title="Megszakításvezérlő, PIC">Megszakításvezérlőnek</span> (PIC) jelzik a <strong>megszakításkérelmüket</strong> (IRQ &ndash; <span class="fogalom" title="megszakítás">interrupt</span> Request), ami a megszakításkérelmet továbbadja a processzornak (<span class="fogalom" title="CPU">CPU</span>). Ezek után a <span class="fogalom" title="Megszakításvezérlő, PIC">Megszakításvezérlő</span> (PIC) újabb megszakításkérelmet nem továbbít addig a processzornak (<span class="fogalom" title="CPU">CPU</span>), amíg nem nyugtázzák (általában egy port kiolvasásával). A <span class="fogalom" title="megszakítás">Megszakítások</span> engedélyezése és tiltása is a <span class="fogalom" title="Megszakításvezérlő, PIC">Megszakításvezérlő</span> (PIC) feladata (általában egy portra való bitmaszk kiírásával történik). A <span class="fogalom" title="Megszakításkérelem, IRQ">megszakításkérelem</span> (IRQ) prioritása a <span class="fogalom" title="Megszakításkérelem, IRQ"><strong>megszakításkérelem</strong></span> <strong>szintje</strong> (IRQL &ndash; Interrupt Request Level).</p><p>A <span class="fogalom" title="megszakítás">Megszakítás</span> hatására elindul az úgynevezett <span class="fogalom" title="Megszakításkezelési folyamat"><strong>megszakításkezelési folyamat</strong></span>, amely a következő lépésekből áll:</p><ul><li>A futó program megszakad.</li><li>A regiszterek mentése megtörténik.</li><li>A megszakításkezelő eljárás meghívása bekövetkezik.</li><li>A regiszterek visszatöltése megtörténik.</li><li>A megszakított program folytatása következik.</li></ul><p><span class="fogalom" title="megszakítás">Megszakítást</span> kiváltható események:</p><ul><li>Egy külső eszköz megszakításkérelme.</li></ul><p>(Például egy időzítő, egy billentyű lenyomása a billentyűzeten, illetve egy adatátvitel befejeződése.)</p><ul><li>Egy felhasználói programból kiváltott <span class="fogalom" title="megszakítás">megszakítás</span>.</li></ul><p>(Például az int rendszerhívó utasítás.)</p><ul><li>Kivételkiváltódás.</li></ul><p>A <strong><span class="fogalom" title="Kivétel">kivétel</span> </strong>egy olyan <span class="fogalom" title="megszakítás">Megszakítás</span>, amit az éppen végrehajtott utasítás vagy valamilyen belső esemény váltott ki.</p><p>Észrevehető, hogy különbséget teszünk az általános <span class="fogalom" title="megszakítás">Megszakítások</span> (interrupt) és a beviteli/kiviteli eszközök megszakításkérelmei (IRQ) között.</p><p>A <span class="fogalom" title="Kivétel">kivételek</span> típusai a következők:</p><ul><li><strong><span class="fogalom" title="Csapda">Csapda</span></strong> (trap)<ul><li>Ez a fajta <span class="fogalom" title="Kivétel">kivétel</span> leginkább a <strong><span class="fogalom" title="Hibakeresés">debuggoláskor</span></strong> fordulhat elő. A <strong><span class="fogalom" title="Hibakeresés">debuggolás</span></strong> a szoftverekben rejlő hibák felderítésének és kijavításának a folyamata, amelynek során a fejlesztők <span class="fogalom" title="Töréspont">töréspontok</span> és lépésenkénti végrehajtás segítségével követik nyomon a program állapotainak változásait, hogy behatárolhassák és azonosíthassák a hibás algoritmusokat és/vagy adatokat.</li><li>A <span class="fogalom" title="Csapda">csapda</span> esetén a megszakított program futása folytatható a következő utasítással. </li><li>Példák a <span class="fogalom" title="Csapda">csapdákra</span>: <span class="fogalom" title="rendszerhívás">rendszerhívás</span> (call kapu és taszk kapu), <span class="fogalom" title="Töréspont"><strong>töréspont</strong></span>.</li></ul></li><li><strong>Hiba</strong> (fault)<ul><li>Hiba esetén a hiba javítása után a megszakított program folytatható a <span class="fogalom" title="Kivétel">kivételt</span> okozó utasítás újrapróbálásával. </li><li>Példa a hibákra: laphiba.</li></ul></li><li><strong>Vetélés</strong> (abort)<ul><li>Vetélés esetén a megszakított program nem folytatható tovább sem a következő utasítással, sem pedig az aktuális utasítás újrapróbálásával. </li><li>Példa a vetélésekre: nullával való osztás.</li></ul></li></ul><h3><a name="hiv4" id="hiv4" ></a>Az operációs rendszerek rendszerhívásainak kezelése</h3><p>Az <span class="fogalom" title="operációs rendszer">operációs rendszerek</span> működése összefügg a felhasználói programok működésével. A felhasználói programok utasításainak a végrehajtása esetén a processzor (<span class="fogalom" title="CPU">CPU</span>) dolgozik, az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> pedig úgymond &#132;nyugalomban van&#148;. Ezt a nyugalmat megszüntethetik, azaz az <span class="fogalom" title="operációs rendszer">operációs rendszert</span> működésre bírhatják bizonyos események. Ilyen esemény lehet, amikor az éppen futtatás alatt levő felhasználói program egy <span class="fogalom" title="rendszerhívás">rendszerhívást</span> (system call) hajt végre, vagy éppenséggel a processzor (<span class="fogalom" title="CPU">CPU</span>) egy külső megszakításkérelmet (IRQ) fogad el, vagy az éppen futtatás alatt levő felhasználói programban egy kivételes helyzet (exception) áll elő, és emiatt egy <span class="fogalom" title="Kivétel">kivétel</span> típusú <span class="fogalom" title="megszakítás">Megszakítás</span> következik be.</p><p>A <span class="fogalom" title="rendszerhívás">rendszerhívások</span> többféle módon valósíthatók meg.</p><ul><li><span class="fogalom" title="megszakítás">Megszakítással</span>:<ul><li>Az MS-DOS <span class="fogalom" title="operációs rendszer">operációs rendszer</span> alatt az int 21h, a <span class="fogalom" title="UNIX">UNIX</span> <span class="fogalom" title="operációs rendszer">operációs rendszer</span> alatt az int 80h.</li></ul></li><li>Call kapuk és taszk kapuk használatával:<ul><li>Egy call kapu meghívásakor a processzor (<span class="fogalom" title="CPU">CPU</span>) átvált rendszermódba, és meghívja a kapuhoz tartozó eljárást. Ha ez az eljárás véget ért, akkor visszaváltunk felhasználói módba és folytatódik a call kaput meghívó program futása. </li><li>A call kapu használatának az előnye, hogy így az alkalmazások az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> eljárásainak csak a belépési pontjait (entry points) látják, és így nem lehetséges beleugrani egyszerűen egy rendszerszintű eljárás &#132;közepébe&#148;.</li></ul></li><li>Privilegizált utasítások elfogásával:<ul><li>Azokat az utasításokat nevezzük privilegizált, azaz kiváltságos utasításoknak, ameyeket csak rendszermódban szabad végrehajtani. </li><li>Privilegizált utasítások többek között a CLI, IN, OUT utasítások és a védett memóriacímek írása, olvasása. </li><li>Ha egy alkalmazás privilegizált utasítást akar végrehajtani, akkor védelmi hiba lép fel, és meghívódik az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> hibakezelő eljárása. </li><li>Egyes <span class="fogalom" title="operációs rendszer">operációs rendszerek</span> ilyenkor megnézik, hogy milyen utasítás okozta a hibát, és bizonyos esetekben úgymond &#132;szimulálják&#148; az utasítás működését. Például ha a Microsoft Windows <span class="fogalom" title="operációs rendszer">operációs rendszer</span> alatt a parancssori ablakban futtatunk egy programot, akkor a B800-as szegmens egy ilyen érzékeny cím. Ha az általunk futtatott felhasználói program ebbe a szegmensbe akar írni, akkor azt észreveszi az <span class="fogalom" title="operációs rendszer">operációs rendszer</span>, és az ablakba kiír egy karaktert.</li></ul></li></ul><p>Noha tudjuk, hogy egy <span class="fogalom" title="rendszerhívás">rendszerhívás</span> a hívó felhasználói program szempontjából egy egyszerű vezérlésátadás, ennek a <span class="fogalom" title="rendszerhívás">rendszerhívásnak</span> a megvalósítása az <span class="fogalom" title="operációs rendszer">operációs rendszerek</span> többségében egy programozott <span class="fogalom" title="megszakítás">megszakítással</span> valósul meg. Tehát összességében kijelenthető, hogy az <span class="fogalom" title="operációs rendszer">operációs rendszereket</span> mindig <span class="fogalom" title="megszakítás">megszakítások</span> hozzák &#132;lázba&#148;, azaz működését a <span class="fogalom" title="megszakítás">megszakításokat</span> kiváltó események vezénylik.</p><p>Természetesen létezik a szokásos eseményeken kívül két sajátos eseménye is az <span class="fogalom" title="operációs rendszer">operációs rendszereknek</span>, amikor egy úgynevezett speciális üzemi állapot állapotban működik az <span class="fogalom" title="operációs rendszer">operációs rendszer</span>: ezek a rendszerindítási és a rendszerleállítási folyamatok.</p><p>Mindenesetre általánosságban a <span class="fogalom" title="rendszerhívás">rendszerhívás</span> programozott <span class="fogalom" title="megszakítás">megszakítást</span> okoz (ilyenek az int és a call utasítások, de a call inkább ritkábban). Az adott processzor <span class="fogalom" title="megszakítás">megszakítási</span> rendszerének mechanizmusa szerint az <span class="fogalom" title="operációs rendszer">operációs rendszerek</span> egy meghatározott belépési pontjára (entry point) kerül a vezérlés átadása egy programozott <span class="fogalom" title="megszakítás">megszakítás</span> hatására. </p><p>Az elvégzendő műveletet, valamint az elvégzendő művelet paramétereit a hívó program jelöli ki az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> konvenciói szerint átadott paraméterekkel. Az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a műveletet kijelölő paraméter szerint elágazva hajtja végre a kívánt műveletet, majd ezt követően az esetek többségében az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> &#132;visszatér&#148; a hívó programhoz, azaz az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a vezérlést visszaadja a hívó programnak. Vannak azonban olyan esetek (néhány eset), amikor az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> nem a hívó programhoz &#132;tér vissza&#148;, azaz az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> nem a hívó programnak adja vissza a vezérlést, hanem valamilyen másik felhasználói vagy rendszerprogramhoz való visszatérés történik. </p><p>Ilyen speciális esetek (amikor nem a hívó program kapja vissza a vezérlést) a következők lehetnek:</p><ul><li>A felhasználói program befejeződésekor, a befejeződést jelző <span class="fogalom" title="rendszerhívás">rendszerhívás</span> esetén, amikor a felhasználói program által használt <span class="fogalom" title="erőforrás">erőforrások</span> felszabadíthatók, a vezérlés nem tér vissza a hívó programhoz, mert egy új felhasználói program betöltése és indítása következik. (Ilyen például a <span class="fogalom" title="job">job</span> következő lépésének a betöltése és indítása.)</li><li>Erőforrás-igénylés történik, amit az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> éppen nem tud kielégíteni, és emiatt a hívó programnak várakoznia kell az <span class="fogalom" title="erőforrás">erőforrás</span> igénylésének kielégítésére. A hívó program további lépéseinek a folytatása nem indulhat meg, amíg az erőforrásigénye nem teljesült. (Ilyen például egy munkaterület-igénylés a memóriában vagy a <span class="fogalom" title="merevlemez">merevlemezen</span>, vagy például kizárólagos perifériahasználat, vagy fájlhasználat igénylése az <span class="fogalom" title="operációs rendszer">operációs rendszertől</span>.)</li><li>A hívó programban várakozás alakul ki egy másik felhasználói program jelzésére vagy üzenetére, ami még nem érkezett meg, és emiatt a hívónak várakoznia kell. A hívó program további lépéseinek a folytatása nem indulhat meg, amíg a másik felhasználói program jelzését nem kapta meg. (Ilyen például, ha a hívó programnak a másik felhasználói program futásának a végére, vagyis az eredményére kell várakoznia.)</li><li>Egy megadott időtartamú késleltetés miatt, vagy adott időpontra való várakozás miatt kell a hívó programnak várakoznia.</li><li>Egy újraütemezési kérés miatt kell a hívó programnak várakoznia, ami a futásról való lemondás az esetlegesen fontosabb feladatokat megoldó programok javára.</li><li>Egy beviteli/kiviteli művelet indítása, aminek a végrehajtása alatt a hívónak várakoznia kell.</li></ul><p>Amikor egy <span class="fogalom" title="rendszerhívás">rendszerhívás</span> következtében a hívó programnak várakozásra kell kényszerülnie, az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> megőrzi a hívó program állapotát, de a várakozásának idejére más program vagy programok végrehajtásáról kell intézkednie. Így a hívás helyére való visszatérés tehát késleltetve lesz mindaddig, amíg a várt feltétel nem teljesül, ami miatt a hívó program várakozik, és az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> úgy nem dönt, hogy ismét az adott hívó programot futtatja.</p><p>A hívó program számára a várakozás a legtöbb esetben nem jelent a szekvenciális végrehajtástól eltérő működést, a hívó program számára logikailag a várakozás mindössze annyit jelent, hogy a <span class="fogalom" title="rendszerhívás">rendszerhívás</span> meglehetősen &#132;lassan&#148; hajtódik végre. Ezt a működést hívjuk <span class="fogalom" title="szinkron rendszerhívás"><strong>szinkron rendszerhívásnak</strong></span><strong>.</strong></p><p>Néhány <span class="fogalom" title="operációs rendszer">operációs rendszer</span> megenged úgynevezett <span class="fogalom" title="aszinkron rendszerhívás">aszinkron rendszerhívásokat</span> is, mindezt jellegzetesen olyan frekventált műveletek esetén, mint a Beviteli/Kiviteli-műveletek, vagy mint a programok együttműködését szervező műveletek. </p><p>Az <span class="fogalom" title="aszinkron rendszerhívás"><strong>aszinkron rendszerhívások</strong></span> olyan <span class="fogalom" title="rendszerhívás">rendszerhívások</span>, amikor a hívó program által kért művelet elindítása után az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> visszatér a hívó programhoz, amely a hívott művelettel párhuzamosan folytatódhat. Ebben az esetben külön <span class="fogalom" title="rendszerhívás">rendszerhívás</span> szolgál a befejeződés lekérdezésére, illetve az arra való várakozásra. Az <span class="fogalom" title="aszinkron rendszerhívás">aszinkron rendszerhívások</span> jellegzetesen a <strong>beviteli/kiviteli műveletek</strong> (avagy input/output műveletek, röviden B/K vagy <span class="fogalom" title="B/K művelet">I/O műveletek</span>).</p><p>Ha az <span class="fogalom" title="aszinkron rendszerhívás">aszinkron rendszerhívás</span> egy beviteli/kiviteli művelet, akkor a kért beviteli/kiviteli művelet elindítása után az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> &#132;visszatér&#148; a hívó programhoz, azaz az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> a vezérlést visszaadja a hívó programnak. Majd ezt követően a hívó program a beviteli/kiviteli művelettel párhuzamosan folytatódhat.</p><p>Más <span class="fogalom" title="operációs rendszer">operációs rendszerek</span> arra adnak lehetőséget, hogy egy felhasználói program megadjon egy olyan belépési pontot (entry point) a saját memóriacímbeli címterében, amelyikre az <span class="fogalom" title="operációs rendszer">operációs rendszer</span> valamilyen esemény bekövetkezésekor adja át a vezérlést (például a beviteli/kiviteli-művelet befejeződése, vagy egy másik program jelzésének megérkezése.) Így a felhasználói program tulajdonképpen egy külső eseményre induló ágat, azaz egy megszakításkezelés jellegű programrészt is tartalmaz, amelyik azonban természetesen a felhasználói módban fog végrehajtódni.</p><p class="vissza"><a href="#fejezetek">Vissza a tartalom<span class="gyorsb">j</span>egyzékhez</a></p> 
  </div>
</div>
<div class="utmutato_also">
  <div class="utm_hivatkozasok_also"><a class="oldalteteje" accesskey="f" href="#teteje"><span class="gyorsb">F</span>el a lap tetejére</a>
  <a class="elozotanlap" id="navialsoelozo" href="teszt/lecke1/teszt.html"><img src="navi/ikon_elozolap.gif" alt="Ugrás a tananyag előző oldalára" title="Ugrás a tananyag előző oldalára" width="36" height="36" /></a>
  <a id='navialsokov' class="kovetktanlap" href="lecke2_lap2.html"><img src="navi/ikon_kovetklap.gif" alt="Ugrás a tananyag következő oldalára" title="Ugrás a tananyag következő oldalára" width="36" height="36"/></a>
  </div>
</div>
<div class="ki_stilus"></div>
<div class="impresszum">
  <table class="uszt">
    <tr>
      <td><div class="imp_eltetatklogo"><img alt="ELTE és ELTE TáTK logó" src="css/arculat/elte_plus_tatk.png" style="width:100%;height:auto;" /></div>
        <div class="imp_elteiklogo"><img alt="ELTE és ELTE IK logó" src="css/arculat/elte_plus_ik.png" style="width:100%;height:auto;" /></div></td>
      <td><div class="imp_uszt"><img alt="Új Széchenyi terv" src="css/arculat/USZT_logo_cmyk.jpg" style="width:100%;height:auto;" /></div></td>
      <td><div class="imp_eu"><img alt="A projekt az Európai Unió támogatásával, az Európai Szociális Alap társfinanszirozásával valósul meg." title="A projekt az Európai Unió támogatásával, az Európai Szociális Alap társfinanszirozásával valósul meg." src="css/arculat/ESZA.png" style="width:100%;height:auto;"/></div></td>
    </tr>
  </table>
</div>
</body>
</html>
