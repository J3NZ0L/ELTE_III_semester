<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="hu" lang="hu">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="css/scormelte_alap.css" rel="stylesheet" type="text/css" title="" />
<link href="css/style_spec.css" rel="stylesheet" type="text/css" />
<link href="css/scormelte_nagy.css" rel="alternate stylesheet" type="text/css" title="nagy" />
<link href="css/scormelte_inverz.css" rel="alternate stylesheet" type="text/css" title="inverz" />
<!--[if lte IE 6]>
<link href="css/scormelte_ie6.css" rel="stylesheet" type="text/css" title="" />
<![endif]-->
<!-- syntax highlight -->
<link rel="stylesheet" type="text/css" href="css/shCore.css" />
<link rel="stylesheet" type="text/css" href="css/shThemeDefault.css" />
<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushCpp.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
<script type="text/javascript" src="js/shBrushDelphi.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushCss.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all()
</script>
<title>
Számítógépes alapismeretek II. / 
<span class="fogalom" title="szignál">szignálok</span>, a szülő-gyerek viszony gyakorlati szempontból
/Feladat: készítsünk egy egyszerű programot, amely ha egy meghatározott szignált kap, akkor egy meghatározott szignált küld vissza! </title>
<meta name="description" content="A tananyag  fejlesztése a TÁMOP-4.1.2.A/2-10/1 pályázat keretén belül történt." />
<meta name="keywords" content="Hardver alapismeretek, operációs rendszer, számítógépes alapismeretek, operációs rendszer fogalma, operációs rendszerek története, operációs rendszer feladata, operációs rendszer generációk, operációs rendszer típusok, folyamatok, folyamat táblázat, szál &ndash; folyamatok, rendszerhívások, operációs rendszer struktúrák, kernelmód, kernel, felhasználói mód, B/K művelet, folyamatok modellje, szinkron rendszerhívás, asszinkron rendszerhívás, állapotai, megvalósításuk, folyamatok kommunikációja, IPC (Inter Process Communication), megszakítástábla, IDT, megszakításvezérlő, PIC, megszakítás, interrupt, megszakításkérelem, IRQ, megszakításkezelési folyamat, kivétel, hibakeresés (debuggolás), töréspont, fájlrendszer, MBR, partíciós szektor, Ntldr, klaszter (cluster), szektor, FAT, NTFS, ext, TSS, csapda, ütemezés, szál, szemafor, mutex, monitor, POSIX, szignál, osztott memória, csővezeték, kritikus szakasz, Wybe Dijkstra, CPU, erőforrás, holtpont, kiéheztetés, integrált áramkör, multiprogramozás, beágyazott rendszerek, partíció, MMU, lapcsere, FIFO, socket, lapozás, swap, interaktív rendszer, kötegelt rendszer, kliens, job, jogosultság, metaadat, könyvtár, UNIX, GNU/LINUX, erőforrás-foglalási gráf, fizikai memória, virtuális memória, merevlemez, floppy, fregmentáció, defregmentáló program, MFT, API, i-node, cache memory, SSH, HyperThread, párhuzamosság" />
<script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="js/kep.js"></script>
<script type="text/javascript" src="js/jquery.media.js"></script>
<script type="text/javascript" src="js/jquery.highlight-3.js"></script>
<script type="text/javascript" src="js/kereses.js"></script>
<script type="text/javascript" src="js/stylesheetToggle.js"></script>
<script type="text/javascript" src="js/cookie.js"></script>
<script type="text/javascript" src="js/stilusvalto.js"></script>
<script type="text/javascript" src="js/fogalmak.js"></script>
<script type="text/javascript" src="js/fogalom.js"></script>
<script type="text/javascript" src="js/jwplayer.js"></script>
<script type="text/javascript">
$(document).ready(function() 
{
$("a.hang").media( {width: 250, height: 50,  autoplay: false} );
});
</script>
<script type="text/javascript" src="js/navigacio.js"></script>
</head>
<body>
<div><a name="teteje"  id="teteje"></a></div>
<div class="jawsfmenu">
  <ul>
    <li><a class="tartalom" href="#tartalom" accesskey="t" tabindex="2">Ugrás a <span class="gyorsb">t</span>artalomra</a></li>
    <li><a class="tartalomj" href="#fejezetek" accesskey="j" tabindex="5">Ugrás a tartalom<span class="gyorsb">j</span>egyzékre</a></li>
    <li><a class="tanutm" href="#tanutm" accesskey="u" tabindex="7">Ugrás a tan<span class="gyorsb">u</span>lási útmutatóra</a></li>
  </ul>
</div>
<div class="ki_kereses"></div>
<div class="oldal">
  <div class="utmutato">
    <div class="utm_hivatkozasok"><span class="elozolap"><img src="navi/ikon_vissza_dis.gif" alt="Vissza az előzőleg látogatott oldalra (nem elérhető funkció)" title="Vissza az előzőleg látogatott oldalra (nem elérhető funkció)" /></span><a class="kezdolap" href="index.html" accesskey="p" tabindex="21"><img src="navi/ikon_kezdolap.gif" alt="Vissza a modul kezdőlapjára" title="Vissza a modul kezdőlapjára" width="36" height="36"/></a><a class="elozotanlap" href="lecke7_lap14.html" accesskey="e" tabindex="22"><img src="navi/ikon_elozolap.gif" alt="Ugrás a tananyag előző oldalára" title="Ugrás a tananyag előző oldalára" width="36" height="36" /></a><a class="kovetktanlap" href="lecke7_lap16.html" accesskey="v" tabindex="23"><img src="navi/ikon_kovetklap.gif" alt="Ugrás a tananyag következő oldalára" title="Ugrás a tananyag következő oldalára" width="36" height="36"/></a><span class="ki_fogalomkapcs"><img src="navi/ikon_fogalmakbe_dis.gif" alt="Fogalom megjelenítés (nem elérhető funckió)" title="Fogalom megjelenítés (nem elérhető funckió)" /></span><span class="ki_fogalomlista"><img src="navi/ikon_fogalmaklista_dis.gif" alt="Fogalmak listája (nem elérhető funkció)" title="Fogalmak listája (nem elérhető funkció)" /></span><span class="ki_nyomtatas"><img src="navi/ikon_nyomtatas_dis.gif" alt="Oldal nyomtatása (nem elérhető funkció)" title="Oldal nyomtatása (nem elérhető funkció)" /></span><a class="oldalterkep" href="oldalterkep.html" accesskey="d" tabindex="31"><img src="navi/ikon_oldalterkep.gif" alt="Oldaltérkép megtekintése" title="Oldaltérkép megtekintése"  width="36" height="36" /></a><a class="sugo" href="sugo.html" accesskey="s" tabindex="33"><img src="navi/ikon_sugo.gif" alt="Súgó megtekintése" title="Súgó megtekintése"  width="36" height="36" /></a></div>
  </div>
  <div class="tartalommenu">
    <div class="tartalommenu_fejlec"><span id="lapteteje"><a  href="#teteje"><span class="gyorsb">F</span>el a lap tetejére</a></span><a name="fejezetek"   id="fejezetek">Tartalomjegyzék</a></div>
    <ul><li><a href="#hiv1">Szignálok, a szülő-gyerek viszony gyakorlati szempontból</a><ul><li><a href="#hiv2">Szignálok</a><ul><li><a href="#hiv3">Példák a szignálok használatára egy C programozási nyelven írt programban</a><ul><li><a href="#hiv4">Feladat: készítsünk egy egyszerű programot, amely ha egy meghatározott szignált kap, akkor egy meghatározott szignált küld vissza! </a></li></ul></li></ul></li></ul></li></ul> 
  </div>
  <div class="tartalom"> <a name="tartalom"    id="tartalom"></a> 
    <h1><a name="hiv1" id="hiv1"></a>Szignálok, a szülő-gyerek viszony gyakorlati szempontból</h1><h2><a name="hiv2" id="hiv2"></a>Szignálok</h2><h3><a name="hiv3" id="hiv3"></a>Példák a szignálok használatára egy C programozási nyelven írt programban</h3><div class="feladat"><span class="feladat">Feladat</span><h4><a name="hiv4" id="hiv4"></a>Feladat: készítsünk egy egyszerű programot, amely ha egy meghatározott szignált kap, akkor egy meghatározott szignált küld vissza! </h4><p>Legyen a feladatunk az, hogy készítsünk C++ programozási nyelven írt programot SigKuldKap.c néven, amely létrehoz egy gyermekfolyamatot! A gyermekfolyamat csak akkor kezdjen véletlen számokat generálni, ha kap a szülőfolyamattól egy SIGUSR1 jelzést! Ha befejezte a munkát, akkor küldjön válaszképpen a szülőfolyamatnak egy SIGUSR2 jelzést!</p><!--{fej7_specialis_1}--><video controls="controls" width="854" height="480"><source src="./specialis/minta1.mp4" type='video/mp4'><source src="./specialis/minta1.ogv"  type='application/ogg' ></video><!--END{fej7_specialis_1}--><!--{fej7_letoltes_1}--><div class="allomanyletoltes"><ul><li><strong>Fájl letöltése:</strong> <a href="letoltes/07_fel1.c">Az alábbi programot ide kattintva lehet letölteni! <span class="jaws">című háttéranyag letöltése</span> </a></li><li><strong>Információ az állományról: </strong></li><li><strong>Fájlméret:</strong> 1.94 <abbr title="kilobájt">KB</abbr></li></ul></div><!--END{fej7_letoltes_1}--></div><div class="forraskod"><div class="bekezdes1cm">

//-------------------- 
// SigKuldKap.c 
//-------------------- 
#include &lt;stdlib.h&gt; 
#include &lt;stdio.h&gt; 
#include &lt;unistd.h&gt;         // Például a fork függvény. 
#include &lt;signal.h&gt;         // Például a kill függvény. 
#include &lt;sys/types.h&gt;      // Például a pid_t típus. 
 
Void kezdjbele(int jelzes) { 
     // A callback függvény, paramétere a szignál számértéke 
     // a gyermekfolyamatnak szóló jelzéshez tartozó függvény. 
     Printf(&#132;Most kaptam egy jelzest &ndash; elkezdek dolgozni\n&#148;); 
     int i; 
     for ( i = 0; i &lt; 10; i++) { 
          printf(&#132;%i,&#148;, rand() % 100); 
     } 
     printf(&#132;\n&#148;); 
     kill(getppid(), SIGUSR2); 
     // Küld egy jelzést a szülőfolyamatnak, hogy kész van. 
} 
 
void kesz(int jelzes) { 
     // A callback függvény, paramétere a szignál számértéke 
     // a szülőfolyamatnak szóló jelzéshez tartozó függvény. 
     Printf(&#132;Vegre kesz!\n&#148;); 
} 
 
int main(int argc, char * argv[]) { 
     pid_t child; 
     int status; 
     int i; 
     printf(&#132;Kezdem\n&#148;); 
     child = fork(); // A gyermekfolyamat létrehozása. 
     If (child &lt; 0) { 
          perror(&#132;hiba\n&#148;); 
          exit(1); 
     } 
     if (child == 0) { // A gyermek. 
          Signal(SIGUSR1, kezdjbele); 
          // A gyermekfolyamathoz tartozó jelzéskezelő beállítása. 
          For( i = 0; i &lt; 10; i++) { 
               printf(&#132;Unatkozom\n&#148;); 
               sleep(1); 
          } 
     } else { 
          signal(SIGUSR2, kesz); 
          // A szülőfolyamathoz tartozó jelzéskezelő beállítása. 
          Int ido = rand() % 5; 
          printf(&#132;%i s mulva jelzest kuldok a gyermeknek\n&#148;, ido); 
          sleep(ido); 
          kill(child, SIGUSR1); 
          // Jelzést küld a gyermeknek, hogy kezdjen bele a 
          // véletlen szám generálásába. 
          Waitpid(child, &#38;status, 0); 
          printf(&#132;Vege a szulofolyamatnak\n&#148;); 
       }; 
       return 0; 
} 
//--------------------
</div>
</div><p><strong> A futtatás eredménye </strong></p><div class="forraskod"><div class="bekezdes1cm">

&gt;gcc SigKuldKap.c  -o SigKuldKap 
Kezdem 
Unatkozom 
3 s mulva jelzest kuldok a gyereknek 
Unatkozom 
Unatkozom 
Unatkozom 
Most kaptam egy jelzest &ndash; elkezdek dolgozni 
33,86,77,15,93,35,86,92,49,21, 
Vegre kesz 
Unatkozom 
&gt;
</div>
</div><p>A következő képeken a program látható futás közben:</p><!--fej7_kep_4--><div class="kep kozep" style="max-width:364px;"><img src="kepek/fej7_kep4_w364.jpg" alt="A képen a program látható futás közben." style="width:100%; height:auto;" title="A képen a program látható futás közben." /><span class="kepalairas">A program futás közben</span></div><div class="uresmargo"></div><!--ENDfej7_kep_4--><!--fej7_kep_5--><div class="kep kozep" style="max-width:391px;"><img src="kepek/fej7_kep5_w391.jpg" alt="A képen a program látható futás közben." style="width:100%; height:auto;" title="A képen a program látható futás közben." /><span class="kepalairas">A program futás közben</span></div><div class="uresmargo"></div><!--ENDfej7_kep_5--><!--fej7_kep_6--><div class="kep kozep" style="max-width:366px;"><img src="kepek/fej7_kep6_w366.jpg" alt="A képen a program látható futás közben." style="width:100%; height:auto;" title="A képen a program látható futás közben." /><span class="kepalairas">A program futás közben</span></div><div class="uresmargo"></div><!--ENDfej7_kep_6--><p><strong>Megfigyelés</strong></p><p>A gyermekfolyamatnál beállítjuk a jelzéskezelőt, és várunk a szülő jelzésére, a gyermek jelzéskezelője lefut. A jelzéskezelő elvégzi a munkát, majd küld egy jelzést ennek befejezéséről a szülőnek. A szülő függvénye is lefut, majd mindkettő folytatja a megkezdett programot. Van jelzéskezelő, tehát nem áll le a folyamat, a függvény végrehajtása után folytatódik a program. A gyermekfolyamat vár tovább, és időnként kiírja a szöveget, a szülőfolyamat pedig vár a gyermekfolyamat befejezésére. (Kilépni CTRL-C billentyűkombináció leütésével lehet.) </p><p>A <span class="fogalom" title="UNIX">UNIX</span> <span class="fogalom" title="operációs rendszer">operációs rendszerben</span> a programunk időzítését is jelzéskezeléssel oldhatjuk meg. Az alarm függvény hívása SIGALRM jelzést küld az aktuális folyamatnak a paraméterében megadott másodperc múlva. </p><p class="vissza"><a href="#fejezetek">Vissza a tartalom<span class="gyorsb">j</span>egyzékhez</a></p> 
  </div>
</div>
<div class="utmutato_also">
  <div class="utm_hivatkozasok_also"><a class="oldalteteje" accesskey="f" href="#teteje"><span class="gyorsb">F</span>el a lap tetejére</a>
  <a class="elozotanlap" id="navialsoelozo" href="lecke7_lap14.html"><img src="navi/ikon_elozolap.gif" alt="Ugrás a tananyag előző oldalára" title="Ugrás a tananyag előző oldalára" width="36" height="36" /></a>
  <a id='navialsokov' class="kovetktanlap" href="lecke7_lap16.html" ><img src="navi/ikon_kovetklap.gif" alt="Ugrás a tananyag következő oldalára" title="Ugrás a tananyag következő oldalára" width="36" height="36"/></a>
  </div>
</div>
<div class="ki_stilus"></div>
<div class="impresszum">
  <table class="uszt">
    <tr>
      <td><div class="imp_eltetatklogo"><img alt="ELTE és ELTE TáTK logó" src="css/arculat/elte_plus_tatk.png" style="width:100%;height:auto;" /></div>
        <div class="imp_elteiklogo"><img alt="ELTE és ELTE IK logó" src="css/arculat/elte_plus_ik.png" style="width:100%;height:auto;" /></div></td>
      <td><div class="imp_uszt"><img alt="Új Széchenyi terv" src="css/arculat/USZT_logo_cmyk.jpg" style="width:100%;height:auto;" /></div></td>
      <td><div class="imp_eu"><img alt="A projekt az Európai Unió támogatásával, az Európai Szociális Alap társfinanszirozásával valósul meg." title="A projekt az Európai Unió támogatásával, az Európai Szociális Alap társfinanszirozásával valósul meg." src="css/arculat/ESZA.png" style="width:100%;height:auto;"/></div></td>
    </tr>
  </table>
</div>
</body>
</html>